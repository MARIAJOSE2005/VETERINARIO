{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Portal Administrador</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            /* Fondo con imagen + gradiente semitransparente */
            background: linear-gradient(135deg, rgba(224,247,250,0.6), rgba(255,255,255,0.6)),
                        url('{% static "clinica/img/administracion_vet.jpg" %}');
            background-size: cover;          /* cubre toda la pantalla */
            background-position: center;     /* centra la imagen */
            background-attachment: fixed;    /* efecto parallax */
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .card {
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.75); /* blanco semitransparente */
            backdrop-filter: blur(10px);           /* difumina la imagen detrás */
            -webkit-backdrop-filter: blur(10px);   /* soporte Safari */
        }
        .btn-lg {
            border-radius: 30px;
            font-weight: bold;
        }
    </style>
</head>

<body>
<div class="container mt-5">
    <div class="card shadow-lg">
        <div class="card-header bg-dark text-white text-center">
            <h2>Gestión de Veterinarios</h2>
        </div>

        <div class="card-body">

            <!-- Bloque de errores del formulario -->
            {% if form.errors %}
              <div class="alert alert-danger">
                <ul>
                  {% for field in form %}
                    {% for error in field.errors %}
                      <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                    {% endfor %}
                  {% endfor %}
                </ul>
              </div>
            {% endif %}

            <!-- Formulario para agregar veterinario -->
            <form method="post" class="mb-4">
                {% csrf_token %}
                <div class="row">
                    <div class="col-md-6">{{ form.cedula.label_tag }} {{ form.cedula }}</div>
                    <div class="col-md-6">{{ form.nombre.label_tag }} {{ form.nombre }}</div>
                </div>
                <div class="row mt-2">
                    <div class="col-md-6">{{ form.correo.label_tag }} {{ form.correo }}</div>
                    <div class="col-md-6">{{ form.especialidad.label_tag }} {{ form.especialidad }}</div>
                </div>
                <div class="d-grid gap-2 mt-3">
                    <button type="submit" class="btn btn-dark">Agregar Veterinario</button>
                </div>
            </form>

            <h4 class="text-primary">Lista de Veterinarios</h4>
            <table class="table table-striped mt-3">
                <thead class="table-secondary">
                    <tr>
                        <th>Cédula</th>
                        <th>Nombre</th>
                        <th>Especialidad</th>
                        <th>Email</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for v in veterinarios %}
                    <tr>
                        <td>{{ v.cedula }}</td>
                        <td>{{ v.nombre }}</td>
                        <td>{{ v.especialidad }}</td>
                        <td>{{ v.email }}</td>
                        <td>
                            <a href="{% url 'editar_veterinario' v.id %}" class="btn btn-sm btn-warning">Editar</a>
                            <a href="{% url 'eliminar_veterinario' v.id %}"
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('¿Seguro que deseas eliminar este veterinario?');">
                               Eliminar
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="5" class="text-center text-muted">No hay veterinarios registrados</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>